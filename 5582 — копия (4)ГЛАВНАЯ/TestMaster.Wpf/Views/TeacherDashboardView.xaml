<UserControl x:Class="TestMaster.Wpf.Views.TeacherDashboardView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Height="600" Width="1200">
    <Grid Margin="10">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="250"/> <!-- Тести -->
            <ColumnDefinition Width="*"/>   <!-- Питання -->
            <ColumnDefinition Width="450"/> <!-- Логи -->
        </Grid.ColumnDefinitions>

        <!-- Ліва колонка: Тести -->
        <DockPanel Grid.Column="0">
            <TextBlock DockPanel.Dock="Top" Text="Мої тести" FontSize="16" FontWeight="Bold" Margin="5"/>
            <StackPanel DockPanel.Dock="Bottom" Orientation="Vertical">
                <Button Content="Створити тест" Command="{Binding AddTestCommand}" Margin="5"/>
                <Button Content="Видалити тест" Command="{Binding DeleteTestCommand}" Margin="5"/>
                <Button Content="Призначити 'Студенту'" Command="{Binding AssignTestCommand}" Margin="5"/>
            </StackPanel>
            
            <ListBox ItemsSource="{Binding Tests}" SelectedItem="{Binding SelectedTest}" Margin="5">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <TextBox Text="{Binding Title, UpdateSourceTrigger=LostFocus}" BorderThickness="0" Background="Transparent"/>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>

        </DockPanel>

        <!-- Центральна колонка: Питання -->
        <DockPanel Grid.Column="1" Margin="10,0,0,0" IsEnabled="{Binding SelectedTest, TargetNullValue=False}">
            <TextBlock DockPanel.Dock="Top" FontSize="16" FontWeight="Bold" Margin="5">
                <Run Text="Питання для тесту:"/>
                <Run Text="{Binding SelectedTest.Title}"/>
            </TextBlock>
            <StackPanel DockPanel.Dock="Bottom" Orientation="Horizontal">
                <Button Content="Додати питання" Command="{Binding AddQuestionCommand}" Margin="5"/>
                <Button Content="Редагувати питання" Command="{Binding EditQuestionCommand}" Margin="5"/>
                <Button Content="Видалити питання" Command="{Binding DeleteQuestionCommand}" Margin="5"/>
            </StackPanel>
            <ListBox ItemsSource="{Binding Questions}" SelectedItem="{Binding SelectedQuestion}" DisplayMemberPath="Text" Margin="5"/>
        </DockPanel>
        
        <!-- Права колонка: Логи -->
        <DockPanel Grid.Column="2" Margin="10,0,0,0">
            <TextBlock DockPanel.Dock="Top" Text="Журнал подій" FontSize="16" FontWeight="Bold" Margin="5"/>
            <Button DockPanel.Dock="Bottom" Content="Оновити лог" Command="{Binding RefreshLogsCommand}" Margin="5"/>
            <ListView ItemsSource="{Binding LogEntries}">
                <ListView.View>
                    <GridView>
                        <GridViewColumn Header="Час" DisplayMemberBinding="{Binding Timestamp, StringFormat='HH:mm:ss'}"/>
                        <GridViewColumn Header="Подія" DisplayMemberBinding="{Binding Message}" Width="360"/>
                    </GridView>
                </ListView.View>
            </ListView>
        </DockPanel>

        <!-- Кнопка виходу -->
        <Button Content="Вийти" Command="{Binding LogoutCommand}" Grid.Column="2" 
                HorizontalAlignment="Right" VerticalAlignment="Top" Margin="5"/>

    </Grid>
</UserControl>